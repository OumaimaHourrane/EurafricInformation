<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Page d'authentification </title>
    </h:head>

    <h:body>
      
      <p:menubar style="margin-top: 30px ;margin-bottom: 30px ; margin-left: auto;">
        <p:submenu label="Insertion des données" icon="ui-icon-document">
            <p:submenu label="BMCE" icon="ui-icon-contact">
                		<p:menuitem value="Incidents Applicatifs" url="AjoutIncAppBMCE.xhtml" />
                        <p:menuitem value="Incidents Infra" url="AjoutIncInfraBMCE.xhtml" />
                        <p:menuitem value="Incidents Réseaux" url="AjoutIncReseauBMCE.xhtml" />
                        <p:menuitem value="Incidents Liens GAB Externalisés" url="AjoutIncLienGabExtBMCE.xhtml" />
                        <p:menuitem value="Incidents Interfaces" url="AjoutIncInterfaceBMCE.xhtml" />
                        <p:menuitem value="Incidents GAB Rattchés" url="AjoutIncGabRatBMCE.xhtml" />
                        <p:menuitem value="Incidents GAB Externalisés" url="AjoutIncGabExtBMCE.xhtml" />
            </p:submenu>
            <p:submenu label="RMA" icon="ui-icon-contact">
                <p:menuitem value="Incidents Récurents accès Intermédiaires" url="#" />
                        <p:menuitem value="Incidents Applicatifs" url="#" />
                        <p:menuitem value="Incidents Exploitation" url="#" />
                        <p:menuitem value="Incidents Infra" url="#" />
           </p:submenu>
          
        </p:submenu>
                <p:menuitem value="Import tickets PS'SOFT" url="Upload_Ticket.xhtml" icon="ui-icon-arrowreturnthick-1-w" />

        <p:submenu label="Affichage des rapports" icon="ui-icon-document">
            <p:submenu label="Hebdomadaire" icon="ui-icon-contact">
			<p:submenu label="BMCE" icon="ui-icon-contact">
               <p:menuitem value="Incidents Applicatifs" url="AffIncAppBMCE.xhtml" />
                        <p:menuitem value="Incidents Infra" url="AffIncInfraBMCE.xhtml" />
                        <p:menuitem value="Incidents Réseaux" url="AffIncReseauBMCE.xhtml" />
                        <p:menuitem value="Incidents Liens GAB Externalisés" url="AffIncLienGabExtBMCE.xhtml" />
                        <p:menuitem value="Incidents Interfaces" url="AffIncInterfaceBMCE.xhtml" />
                        <p:menuitem value="Incidents GAB Rattchés" url="AffIncGabRatBMCE.xhtml" />
                        <p:menuitem value="Incidents GAB Externalisés" url="AffIncGabExtBMCE.xhtml" />
            </p:submenu>
            <p:submenu label="RMA" icon="ui-icon-contact">
               	 		<p:menuitem value="Incidents Récurents accès Intermédiaires" url="#" />
                        <p:menuitem value="Incidents Applicatifs" url="#" />
                        <p:menuitem value="Incidents Exploitation" url="#" />
                        <p:menuitem value="Incidents Infra" url="#" />
            </p:submenu>            
            </p:submenu>
            <p:submenu label="Mensuel" icon="ui-icon-contact">
	             <p:menuitem value="BMCE" url="Mensuel_BMCE.xhtml"/>     
	             <p:menuitem value="RMA" url="#"/>
            </p:submenu>
           <p:submenu label="Annuel" icon="ui-icon-contact">  
	           <p:submenu label="BMCE" icon="ui-icon-contact">
	               			<p:menuitem value="Evolution des incidents" url="#" />   
	            </p:submenu>
	            <p:submenu label="RMA" icon="ui-icon-contact">
	               	 		<p:menuitem value="Incidents Récurents accès Intermédiaires" url="#" />
	                        <p:menuitem value="Incidents Applicatifs" url="#" />
	                        <p:menuitem value="Incidents Exploitation" url="#" />
	                        <p:menuitem value="Incidents Infra" url="#" />
	            </p:submenu>           
           </p:submenu>
        </p:submenu>

        <p:submenu label="Gestion d'utilisateur" icon="ui-icon-gear">
            <p:menuitem value="Lister les utilisateurs" icon="ui-icon-refresh" url="Gestion_Utilisateur.xhtml"/>
            <p:menuitem value="Ajouter" icon="ui-icon-refresh " url="Ajouter.xhtml"/>            
        </p:submenu>
																																																																																																																																																																																																																																																																																																																																																																																											
        <f:facet name="options">
            <p:button value="Compte" icon="ui-icon-newwin" outcome="Compte.xhtml"/>
            <p:commandButton  value="Logout" icon="ui-icon-extlink" action="#{adminMB.logOut}"/>
        </f:facet>
    </p:menubar>
    
    <h2 style="color: gray;text-decoration: underline;">Top 10 des délais de résolution des incidents GAB BMCE les plus longs durant Mars 2016</h2>
   
     <h3 style="color: #40A491;align:center;">GAB rattachés au site</h3>
     	<p:dataTable id="tbl" var="incident" editable="true"  
          resizableColumns="true" sortMode="multiple" style=" font-size: 80%;" 
		    value="#{MenIncGabRatBMCEController.listInc2}" >
     	
       <p:ajax event="rowEdit" listener="#{MenIncGabRatBMCEController.onRowEdit}" />
       <p:ajax event="rowEditCancel" listener="#{MenIncGabRatBMCEController.onRowCancel}"/>
       
      	  <p:column headerText="Nom" sortBy="#{incident.ville}" style="width:200px; text-align: center;">
               <p:cellEditor>
	                <f:facet name="output"><h:outputText value="#{incident.ville}"/></f:facet>
	                <f:facet name="input"><p:inputText  value="#{incident.ville}" style="width:100%"/></f:facet>
           	   </p:cellEditor>
          </p:column> 
          
            <p:column headerText="Identifiant" sortBy="#{incident.idGab}" style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.idGab}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.idGab}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column>    
              
         <p:column headerText="Durée incident" sortBy="#{incident.duree}"  style="width:90px;text-align: center;">
         		
              <p:cellEditor>
               <f:facet name="output">
               	<h:outputText value="#{incident.duree}" />
               </f:facet>
               <f:facet name="input"><p:inputMask id="duree"  value="#{incident.duree}" required="true" mask="99j 99h 99min">
               	<f:validator validatorId="heureValidator" /></p:inputMask>
               </f:facet>
           	   </p:cellEditor>
          </p:column>            
        <p:column headerText="Date d'incident" sortBy="#{incident.dateDebut}" style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.dateDebut}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.dateDebut}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column> 
        <p:column headerText="Commentaire" sortBy="#{incident.commentaire}" style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.commentaire}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.commentaire}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column> 
          <p:column headerText="Edit" style="width:32px">
           <p:rowEditor/>
       	  </p:column> 
       <p:column headerText="Delete"  style="width:50px; text-align: center;">
          <h:form>
               <p:commandButton action="#{ajoutIncAppBMCEController.supprimer(incident)}"  icon="ui-icon-closethick" ajax="false" title="Supprimer" />
          </h:form>
       </p:column>   
       </p:dataTable>
          <h:form>
   <p:outputPanel style="text-align: center; margin-top:15px;margin-bottom:30px;">
       <p:outputLabel >Exporter vers : </p:outputLabel>
		    <h:commandButton value="Excel" >
        <p:dataExporter type="xls" target="tbl" fileName="Rapport_Men_15" pageOnly="true"/>
    </h:commandButton>
 
    <h:commandButton value="CSV">
        <p:dataExporter type="csv" target="tbl" fileName="Rapport_Men_15" pageOnly="true" />
    </h:commandButton>
		    </p:outputPanel> 
	    </h:form> 
	    
	    <p:chart type="bar" model="#{chartView.barModel}" style="height:300px" widgetVar="chart"/>
	    <p:outputPanel style="text-align: center; margin-top:15px;margin-bottom:30px;">
	    <p:outputLabel >Exporter comme image : </p:outputLabel>
	    <p:commandButton style="text-align: center;" type="button" value="Export" icon="ui-icon-extlink" onclick="exportChart()"/>
 		</p:outputPanel>
		<p:dialog widgetVar="dlg" showEffect="fade" modal="true" header="Chart as an Image" resizable="false">
		    <p:outputPanel id="output" layout="block" style="width:500px; height:300px"/>
		</p:dialog>
		 
		
	    
    <h3 style="color: #40A491;align:center;">GAB hors site</h3>
          <p:dataTable id="tbl1" var="incident" editable="true"  
          resizableColumns="true"  style=" font-size: 80%;" 
		    value="#{MenIncLienGabExtBMCEController.listInc2}" >
     	
       <p:ajax event="rowEdit" listener="#{MenIncLienGabExtBMCEController.onRowEdit}" />
       <p:ajax event="rowEditCancel" listener="#{MenIncLienGabExtBMCEController.onRowCancel}"/>
       
      	  <p:column headerText="Nom"  style="width:200px; text-align: center;">
               <p:cellEditor>
	                <f:facet name="output"><h:outputText value="#{incident.ville}"/></f:facet>
	                <f:facet name="input"><p:inputText  value="#{incident.ville}" style="width:100%"/></f:facet>
           	   </p:cellEditor>
          </p:column> 
          
            <p:column headerText="Identifiant"  style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.idGab}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.idGab}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column>    
              
         <p:column headerText="Durée incident" sortBy="#{incident.duree}"  style="width:90px;text-align: center;">
         		
              <p:cellEditor>
               <f:facet name="output">
               	<h:outputText value="#{incident.duree}" />
               </f:facet>
               <f:facet name="input"><p:inputMask id="duree"  value="#{incident.duree}" required="true" mask="99j 99h 99min">
               	<f:validator validatorId="heureValidator" /></p:inputMask>
               </f:facet>
           	   </p:cellEditor>
          </p:column>            
        <p:column headerText="Date d'incident"  style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.dateDebut}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.dateDebut}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column> 
        <p:column headerText="Commentaire"  style="width:140px; text-align: center;">
             <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{incident.commentaire}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{incident.commentaire}" style="width:100%"/></f:facet>
             </p:cellEditor>  
        </p:column> 
          <p:column headerText="Edit" style="width:32px">
           <p:rowEditor/>
       	  </p:column> 
       <p:column headerText="Delete"  style="width:50px; text-align: center;">
          <h:form>
               <p:commandButton action="#{ajoutIncAppBMCEController.supprimer(incident)}"  icon="ui-icon-closethick" ajax="false" title="Supprimer" />
          </h:form>
       </p:column>   
       </p:dataTable>
      <!-- <p:chart type="bar" model="#{ChartView_MenIncGat.createHorizontalBarModel}" style="height:300px"/>-->
      <h:form>
         
   <p:outputPanel style="text-align: center; margin-top:15px;margin-bottom:30px;">
       <p:outputLabel >Exporter vers : </p:outputLabel>
		    <h:commandButton value="Excel" >
        <p:dataExporter type="xls" target="tbl" fileName="Rapport_Men_11" pageOnly="true"/>
    </h:commandButton>
 
    <h:commandButton value="CSV">
        <p:dataExporter type="csv" target="tbl1" fileName="Rapport_Men_11" pageOnly="true" />
    </h:commandButton>
		    </p:outputPanel> 
	    </h:form> 
	    
	    <p:chart type="bar" model="#{chartView.barModel}" style="height:300px" widgetVar="chart1"/>
	    <p:outputPanel style="text-align: center; margin-top:15px;margin-bottom:30px;">
	    <p:outputLabel >Exporter comme image : </p:outputLabel>
	    <p:commandButton style="text-align: center;" type="button" value="Export" icon="ui-icon-extlink" onclick="exportChart1()"/>
 		</p:outputPanel>
		<p:dialog widgetVar="dlg1" showEffect="fade" modal="true" header="Chart as an Image" resizable="false">
		    <p:outputPanel id="output1" layout="block" style="width:500px; height:300px"/>
		</p:dialog>
		 
		<script type="text/javascript">
		function exportChart() {
		    //export image
		    $('#output').empty().append(PF('chart').exportAsImage());
		    //show the dialog
		    PF('dlg').show();
		}
		function exportChart1() {
		    //export image
		    $('#output1').empty().append(PF('chart1').exportAsImage());
		    //show the dialog
		    PF('dlg1').show();
		}
		</script>
	    
    </h:body>
</html>
